library(tidyverse)
library(showtext)
font_add_google("Fira Sans", "firasans")
showtext_auto()
theme_customs <- theme(
plot.title.position = 'plot',
text = element_text(family = 'firasans', size = 16),
plot.title = element_text(
face = 'bold',
colour = thematic::okabe_ito(8)[6],
margin = margin(t = 2, r = 0, b = 7, l = 0, unit = "mm")
),
)
theme_set(
theme_minimal() +
theme_customs
)
dat %>%
ggplot(aes(x = year, fill = class_group, alpha = class)) +
geom_bar(col = 'white') + # Add lines for distinction
scale_fill_manual(values = colors) +
scale_alpha_manual(values = alpha_vals) +
guides(
fill = guide_none(),
alpha = guide_legend(override.aes = list(fill = colors[c(1, 1, 1, 2, 3, 3, 3)]))
) +
labs(
x = 'Year',
y = 'Counts',
alpha = 'Class',
title = 'Group categories together by color, \nbut keep showing them'
)
alpha_max <- 1
alpha_min <- 0.7
alpha_vals <- c(
seq(alpha_max, alpha_min, length.out = 4),
seq(alpha_min, alpha_max, length.out = 4)[-1]
)
colors <-  thematic::okabe_ito(3)
dat <- mpg %>%
mutate(
year = factor(year),
class_group = case_when(
class %in% c('2seater', 'compact', 'midsize') ~ "grp1",
class == 'minivan' ~ "grp2",
T ~ "grp3"
)
)
shades_plt <- dat %>%
ggplot(aes(x = year, fill = class_group, alpha = class)) +
geom_bar() +
scale_fill_manual(values = colors) +
scale_alpha_manual(values = alpha_vals) +
guides(
fill = guide_none(),
alpha = guide_legend(override.aes = list(fill = colors[c(1, 1, 1, 2, 3, 3, 3)]))
) +
labs(
x = 'Year',
y = 'Counts',
alpha = 'Class',
title = 'Show shades, not hues'
)
shades_plt
dat %>%
ggplot(aes(x = year, fill = class_group, alpha = class)) +
geom_bar(col = 'white') + # Add lines for distinction
scale_fill_manual(values = colors) +
scale_alpha_manual(values = alpha_vals) +
guides(
fill = guide_none(),
alpha = guide_legend(override.aes = list(fill = colors[c(1, 1, 1, 2, 3, 3, 3)]))
) +
labs(
x = 'Year',
y = 'Counts',
alpha = 'Class',
title = 'Group categories together by color, \nbut keep showing them'
)
mpg %>%
ggplot(aes(x = year, fill = class)) +
geom_bar()
dat %>%
ggplot(aes(x = year, fill = class_group, alpha = class)) +
geom_bar()
shades_plt <- dat %>%
ggplot(aes(x = year, fill = class_group, alpha = class)) +
geom_bar()
shades_plt
shades_plt <- dat %>%
ggplot(aes(x = year, fill = class_group, alpha = class)) +
geom_bar() +
labs(
x = 'Year',
y = 'Counts',
alpha = 'Class',
title = 'Show shades, not hues'
)
shades_plt
# Color-safe colors
colors <-  thematic::okabe_ito(3)
# Possible levels of transparency (one for each class)
alpha_max <- 1
alpha_min <- 0.7
alpha_vals <- c(
seq(alpha_max, alpha_min, length.out = 4),
seq(alpha_min, alpha_max, length.out = 4)[-1]
)
alpha_vals
# Tweak previous plot
shades_plt +
scale_fill_manual(values = colors) +
scale_alpha_manual(values = alpha_vals)
# Color-safe colors
colors <-  thematic::okabe_ito(3)
# Possible levels of transparency (one for each class)
alpha_max <- 1
alpha_min <- 0.7
alpha_vals <- c(
seq(alpha_max, alpha_min, length.out = 4),
seq(alpha_min, alpha_max, length.out = 4)[-1]
)
alpha_vals
# Tweak previous plot
shades_plt <- shades_plt +
scale_fill_manual(values = colors) +
scale_alpha_manual(values = alpha_vals)
shades_plt
p +
gghighlight(person == 'alone') +
labs(title = 'Emphasize just one or a few categories')
setwd(here::here('content/en/post/2022-02-19-ggplot2-color-tips-from-datawrapper/'))
setwd(here::here('content/en/post/2022-02-19-ggplot2-color-tips-from-datawrapper/'))
# Some data wrangling
time_data <- read_csv("time-spent-with-relationships-by-age-us.csv") %>%
rename_with(
~c('Entitity', 'Code', 'Age', 'alone', 'friends', 'children', 'parents',
'partner', 'coworkers')
) %>%
pivot_longer(
cols = alone:coworkers,
names_to = 'person',
values_to = 'minutes'
) %>%
janitor::clean_names() %>%
filter(age <= 80)
# Color-blind safe colors
colors <- thematic::okabe_ito(8)[-6]
# Line plot
p <- time_data %>%
ggplot(aes(x = age, y = minutes, col = person)) +
geom_line(size = 1.5) +
scale_color_manual(values = colors) +
coord_cartesian(xlim = c(15, 81), expand = F) +
scale_y_continuous(minor_breaks = NULL) +
labs(x = 'Age (in years)', y = 'Minutes', col = 'Time spent')
p
p +
gghighlight(person == 'alone') +
labs(title = 'Emphasize just one or a few categories')
library(gghighlight)
p +
gghighlight(person == 'alone') +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(
person == 'alone',
label_params = list(box.padding = 0)
) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(
person == 'alone',
label_params = list(nudge_x = 1)
) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(
person == 'alone',
label_params = list(nudge_x = -1)
) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(
person == 'alone',
label_params = list(nudge_x = -5)
) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(
person == 'alone',
label_params = list(nudge_y = -5)
) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(
person == 'alone',
label_params = list(nudge_y = -5, size = 5.5)
) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(
person == 'alone',
label_params = list(nudge_y = -5, size = 5.5, family = 'firasans')
) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(
person == 'alone',
label_params = list(
nudge_y = -5,
size = 5.5,
family = 'firasanssd'
)
) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(
person == 'alone',
label_params = list(
nudge_y = -5,
size = 5.5,
family = 'firasans'
)
) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(
person == 'alone',
label_params = list(
nudge_y = -25,
size = 5.5,
family = 'firasans'
)
) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(
person == 'alone',
label_params = list(
nudge_y = -50,
size = 5.5,
family = 'firasans'
)
) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(
person == 'alone',
label_params = list(
nudge_y = -50,
size = 6.5,
family = 'firasans'
)
) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(
person == 'alone',
label_params = list(
nudge_y = -50,
size = 6.5,
family = 'firasans',
label.r = 0
)
) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(
person == 'alone',
label_params = list(
nudge_y = -50,
size = 6.5,
family = 'firasans',
label.r = 0
)
) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(person == 'alone', use_direct_label = F) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(person == 'alone', use_direct_label = F) +
theme(legend.position = F) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(person == 'alone', use_direct_label = F) +
theme(legend.position = 'none') +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(person == 'alone', use_direct_label = F) +
theme(legend.position = 'none') +
annotate('text', x = 60, y = 400, label = 'alone') +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(person == 'alone', use_direct_label = F) +
theme(legend.position = 'none') +
annotate(
'text',
x = 60,
y = 400,
label = 'alone',
hjust = 0
) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(person == 'alone', use_direct_label = F) +
theme(legend.position = 'none') +
annotate(
'text',
x = 60,
y = 400,
label = 'alone',
hjust = 0,
size = y
) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(person == 'alone', use_direct_label = F) +
theme(legend.position = 'none') +
annotate(
'text',
x = 60,
y = 400,
label = 'alone',
hjust = 0,
size = 7
) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(person == 'alone', use_direct_label = F) +
theme(legend.position = 'none') +
annotate(
'text',
x = 60,
y = 400,
label = 'alone',
hjust = 0,
size = 7,
family = 'firasans'
) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(person == 'alone', use_direct_label = F) +
theme(legend.position = 'none') +
annotate(
'text',
x = 60,
y = 400,
label = 'alone',
hjust = 0,
size = 7,
family = 'firasans',
color = colors[1]
) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(person == 'alone', use_direct_label = F) +
theme(legend.position = 'none') +
annotate(
'text',
x = 65,
y = 400,
label = 'alone',
hjust = 0,
size = 7,
family = 'firasans',
color = colors[1]
) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(person == 'alone', use_direct_label = F) +
theme(legend.position = 'none') +
annotate(
'text',
x = 65,
y = 420,
label = 'alone',
hjust = 0,
size = 7,
family = 'firasans',
color = colors[1]
) +
labs(title = 'Emphasize just one or a few categories')
p +
gghighlight(person == 'alone', use_direct_label = F) +
theme(legend.position = 'none') +
annotate(
'text',
x = 65,
y = 410,
label = 'alone',
hjust = 0,
size = 7,
family = 'firasans',
color = colors[1]
) +
labs(title = 'Emphasize just one or a few categories')
alone_plt +
annotate(
'text',
x = 15,
y = 455,
label = 'We spend a lot of time alone...',
hjust = 0,
vjust = 0,
family = 'firasans',
size = 7
) +
annotate(
'text',
x = 65,
y = 410,
label = 'alone',
hjust = 0,
size = 7,
family = 'firasans',
color = colors[1]
)
alone_plt +
annotate(
'text',
x = 15,
y = 455,
label = 'We spend a lot of time alone...',
hjust = 0,
vjust = 0,
family = 'firasans',
size = 7
) +
annotate(
'text',
x = 65,
y = 410,
label = 'alone',
hjust = 0,
size = 7,
family = 'firasans',
color = colors[1]
)
library(gghighlight)
alone_plt <- p +
gghighlight(person == 'alone', use_direct_label = F) +
labs(title = 'Emphasize just one or a few categories')
alone_plt
alone_plt +
annotate(
'text',
x = 15,
y = 455,
label = 'We spend a lot of time alone...',
hjust = 0,
vjust = 0,
family = 'firasans',
size = 7
) +
annotate(
'text',
x = 65,
y = 410,
label = 'alone',
hjust = 0,
size = 7,
family = 'firasans',
color = colors[1]
)
alone_plt +
annotate(
'text',
x = 15,
y = 455,
label = 'We spend a lot of time alone...',
hjust = 0,
vjust = 0,
family = 'firasans',
size = 7
) +
annotate(
'text',
x = 65,
y = 410,
label = 'alone',
hjust = 0,
size = 7,
family = 'firasans',
color = colors[1]
) +
theme(legend.position = 'none')
alone_plt +
annotate(
'text',
x = 15,
y = 455,
label = 'We spend a lot of time alone...',
hjust = 0,
vjust = 0,
family = 'firasans',
size = 7
) +
annotate(
'text',
x = 65,
y = 410,
label = 'alone',
hjust = 0,
size = 7,
family = 'firasans',
color = colors[1]
) +
labs(title = 'Label directly') +
theme(legend.position = 'none')
colors
